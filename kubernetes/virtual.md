# 物理资源抽象

Kubernetes 将管理的物理资源抽象成指定的类型和对应的计量单位，这些资源可以分类两类，一种是可压缩的资源，譬如 CPU (millicores)， 当 Pod 使用超过 limits 限制时， Pod 中进程使用 CPU 会被限制，但不会被 Kill，另一种是不可压缩资源，譬如 内存 (B)、磁盘，当资源不足时，会先 kill 掉优先级低的 Pod。

## CPU 资源

在 Kubernetes 中，一个 CPU 等于 1 个物理 CPU 核 或者 1 个虚拟核， 取决于节点是一台物理主机还是运行在某物理主机上的虚拟机。CPU 的计量单位为毫核(m)。一个节点的 CPU 核心数量乘以 1000，得到的就是节点总的 CPU 总数量。如，一个节点有两个核，那么该节点的 CPU 总量为 2000m。

CPU 资源的设定也可以表达带小数 CPU 的请求。 当设置为 0.5 时， 所请求的 CPU 资源为 1.0 CPU 时的一半。 对于 CPU 资源单位，数量表达式 0.1 等价于表达式 100m，可以看作 “100 millicpu”。 

CPU 资源总是设置为资源的绝对数量而非相对数量值。 例如，无论容器运行在单核、双核或者 48-核的机器上，500m CPU 表示的是大约相同的计算能力。


## 内存 资源

内存的约束和请求以字节为单位，你可以使用普通的不带单位的字节，或者带有具体单位的数字来表示内存：E、P、T、G、M、k。 你也可以使用对应的 2 的幂数：Ei、Pi、Ti、Gi、Mi、Ki。 例如，以下表达式所代表的是大致相同的值：

```
128974848, 129e6, 129M, 123Mi
```

注意 `123 Mi = 123*1204*1204B = 129 M`

什么是 2 的幂数？举个例子 M（（Megabyte）） 和 Mi（Mebibyte） ，1M 就是`1*1000*1000` 字节，1Mi 就是`1*1024*1024`字节，所以1M < 1Mi，显然带这个小i的更准确。


这些资源都是在 kubelet 启动的节点上面，有 kublet 负责上报，节点定义的 Node Capacity 是每个节点固定的资源总和,触发硬件发生变化, 譬如内存,可以认为这是一个常量。